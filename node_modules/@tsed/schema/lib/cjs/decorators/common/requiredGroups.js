"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.RequiredGroups = void 0;
const matchGroups_js_1 = require("../../utils/matchGroups.js");
const jsonEntityFn_js_1 = require("./jsonEntityFn.js");
/**
 * Apply groups validation strategy for required property.
 *
 * @decorator
 * @validation
 * @swagger
 * @schema
 * @input
 */
function RequiredGroups(...groups) {
    return (0, jsonEntityFn_js_1.JsonEntityFn)((entity) => {
        entity.parent.schema.$hooks.on("requiredGroups", (required, givenGroups) => {
            if ((0, matchGroups_js_1.matchGroups)(groups, givenGroups)) {
                return required.filter((key) => key !== entity.propertyKey);
            }
            return required;
        });
    });
}
exports.RequiredGroups = RequiredGroups;
//# sourceMappingURL=requiredGroups.js.map