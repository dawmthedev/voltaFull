"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.anyMapper = void 0;
const JsonLazyRef_js_1 = require("../../domain/JsonLazyRef.js");
const JsonSchema_js_1 = require("../../domain/JsonSchema.js");
const JsonSchemaMapperContainer_js_1 = require("../../registries/JsonSchemaMapperContainer.js");
const generics_js_1 = require("../../utils/generics.js");
const ref_js_1 = require("../../utils/ref.js");
function anyMapper(input, options = {}) {
    if (typeof input !== "object" || input === null) {
        return input;
    }
    if (input instanceof JsonLazyRef_js_1.JsonLazyRef) {
        return (0, JsonSchemaMapperContainer_js_1.execMapper)("lazyRef", [input], options);
    }
    if (input instanceof JsonSchema_js_1.JsonSchema && input.get("enum") instanceof JsonSchema_js_1.JsonSchema) {
        const enumSchema = input.get("enum");
        return (0, ref_js_1.toRef)(enumSchema, enumSchema.toJSON(options), options);
    }
    if (input.$kind && input.$isJsonDocument) {
        const kind = (0, JsonSchemaMapperContainer_js_1.execOneOfMapper)([input.$kind, "map"], options);
        const schema = (0, JsonSchemaMapperContainer_js_1.execMapper)(kind, [input], (0, generics_js_1.mapGenericsOptions)(options));
        return input.canRef ? (0, ref_js_1.toRef)(input, schema, options) : schema;
    }
    return (0, JsonSchemaMapperContainer_js_1.execMapper)("object", [input], options);
}
exports.anyMapper = anyMapper;
(0, JsonSchemaMapperContainer_js_1.registerJsonSchemaMapper)("any", anyMapper);
//# sourceMappingURL=anyMapper.js.map