"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.discriminatorMappingMapper = void 0;
const core_1 = require("@tsed/core");
const JsonSchemaMapperContainer_js_1 = require("../../registries/JsonSchemaMapperContainer.js");
const ref_js_1 = require("../../utils/ref.js");
function discriminatorMappingMapper(obj, _, options) {
    if (obj.discriminator?.mapping) {
        const entries = Object.entries(obj.discriminator.mapping);
        const newMapping = {};
        for (const [key, value] of entries) {
            newMapping[key] = (0, core_1.isString)(value) ? value : (0, ref_js_1.toRef)(value, null, options).$ref;
        }
        obj.discriminator.mapping = newMapping;
    }
    return obj;
}
exports.discriminatorMappingMapper = discriminatorMappingMapper;
function defaultDiscriminatorMappingMapper(obj) {
    if (obj.discriminator?.mapping) {
        delete obj.discriminator.mapping;
    }
    return obj;
}
(0, JsonSchemaMapperContainer_js_1.registerJsonSchemaMapper)("discriminatorMapping", defaultDiscriminatorMappingMapper);
//# sourceMappingURL=discriminatorMappingMapper.js.map