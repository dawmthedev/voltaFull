"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PlatformExpressHandler = void 0;
const common_1 = require("@tsed/common");
const core_1 = require("@tsed/core");
const util_1 = require("util");
class PlatformExpressHandler extends common_1.PlatformHandler {
    onResponse(response, $ctx) {
        super.onResponse(response, $ctx);
        // call returned middleware
        if ((0, core_1.isFunction)($ctx.data) && !(0, core_1.isStream)($ctx.data)) {
            return (0, util_1.promisify)($ctx.data)($ctx.getRequest(), $ctx.getResponse());
        }
    }
}
exports.PlatformExpressHandler = PlatformExpressHandler;
//# sourceMappingURL=PlatformExpressHandler.js.map